<!DOCTYPE html>
<HTML lang="en">
	<HEAD>
		<meta charset="utf-8">
		<TITLE>
			The Alcohol Genome Project - Beer
		</TITLE>

		<!-- jQuery -->
		<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
		<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>

		<!-- boostrap -->
		<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
		<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>

		<!-- Select2 -->
		<link type="text/css" rel="stylesheet" href="//cdn.jsdelivr.net/select2/3.3.1/select2.css" />
		<script type="text/javascript" src="//cdn.jsdelivr.net/select2/3.3.1/select2.js"></script>
		<script type="text/javascript" src="//cdn.jsdelivr.net/select2/3.3.1/select2.min.js"></script>

		<!-- json-to-table -->
		<script type="text/javascript" src="./afshinm-Json-to-HTML-Table-281c16c/json-to-table.js"></script>

		

		<!-- local CSS -->
		<!-- <link href="dionysus.css" rel="stylesheet"> -->


		<script>

		function populateOptions(option_list) {
			for (var i = 0; i < option_list.length; i++) {

			}
		}


		$(document).ready(function() {
			$.get('/get_beer_list', function(response) {
				var beer_list = response;

				for (var b = 0; b < beer_list.length; b++){
					$("#search").append('<option value ="' + beer_list[b] + '">' + beer_list[b] + '</option>');
				}

				$("#search").select2({
					placeholder: "Search our database of 10,000 beers...",
					width: "100%",
					minimumInputLength: 3
					// width: "element"
				// minimumInputLength: 3,
				// dropdownCssClass: "bigdrop"
			});
				$("#loading").removeClass("visible");
				$("#loading").addClass("invisible");
				$("#search").removeClass("invisible");
				$("#search").addClass("visible");
				$("#search").focus();

			});


			// $("#search").select2().data({
			// 	"try this" : "or this"
			// });

		// $("search_results").dataTable()

		$("#search").change( function() {
			to_send = {"search_items" : $("#search").val()};

			$.post('/search', to_send, function (response) {

				var new_results = ConvertJsonToTable(response.slice(0, 100), 'search_results');
				$('#search_results').html(new_results);

			});
		});
	});


</script>

</HEAD>
<BODY>
	<div class="navbar">
		<div class="navbar-inner">
			<a class="brand" href="#">The Alcohol Genome Project</a>
			<ul class="nav">
				<li><a href="#">About</a></li>
				<li class="active"><a href="#">Beer</a></li>
				<li><a href="#">Wine</a></li>
				<li><a href="#">Whiskey</a></li>
			</ul>
		</div>
	</div>

	<div class="page-header row-fluid">
		<span class="span8 offset2">
			<h2>Beer! <small>...recommendations by the Alcohol Genome Project</small></h2>
		</span>
	</div>

	<div class="row-fluid">
		<span class="span8 offset2">
			<select multiple id="search" class="invisible">
			</select>

			<div id="loading" class="visible lead"> Loading Beers <img src="./waiting.gif" width="30px"> </div>
		</span>
	</div>

	<br>

	<div class="row-fluid">

		<span class="span8 offset2">
			<p class="lead">
				Our Suggestions:
			</p>
		</span>
	</div>

	<div class="row-fluid">
		<span class="span8 offset2">
			<table id="search_results" class="table">
				<thead>
					<tr>
						<th>Name</th>
						<th>Brewery</th>
						<th>Style</th>
						<th>BeerAdvocate Rating</th>
					</tr>
				</thead>
			</table>
		</span>
	</div>

</BODY>
</HTML>